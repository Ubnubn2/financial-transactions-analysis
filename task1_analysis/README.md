# Анализ финансовых транзакций и клиентов

## Назначение
Проект выполняет очистку и анализ данных о финансовых транзакциях, объединяет их с данными клиентов и проводит сегментацию по уровню активов.

## Структура проекта
- `src/main.ipynb` - Jupyter Notebook с полным анализом
- `src/crawler.py` - скрипт для краулера (дополнительное задание)
- `tests/test_main.py` - тесты для проверки функций
- `docs/design.md` - описание архитектурных решений
- `transactions_cleaned.csv` - очищенные данные (создается в процессе)

## Запуск проекта
1. Установите зависимости:
   ```bash
   pip install pandas numpy openpyxl matplotlib seaborn scikit-learn


----------------------------------------------------------------------------------
Общие выводы по заданию 1

1. Очистка и подготовка данных
Исходный файл transactions_data.xlsx содержал пропуски и текстовые маркеры (INVALID_DATE, «Неизвестная услуга» и т.п.), которые были заменены на NaN.

После замены удалены строки с некорректными датами, отрицательными и нулевыми суммами, а также с пропущенными client_id.

Категориальные пропуски заполнены значением 'unknown'.

В результате получен чистый DataFrame из 8411 строк (из исходных 10000), готовый к анализу.

2. Анализ данных
Топ-5 услуг по количеству заказов:

Инвестиционное консультирование – 2085
Управление активами – 1729
Налоговое планирование – 1316
Финансовое планирование – 1315
Структурирование капитала – 1287
Наиболее востребованная услуга – инвестиционное консультирование.
Средняя сумма транзакции по городам варьируется от ~58 000 до ~42 000. Город unknown (заполненные пропуски) имеет среднюю сумму 48 664, что не выбивается из общего диапазона.

Услуга с наибольшей выручкой – инвестиционное консультирование (104,2 млн), подтверждая его лидерство как по количеству, так и по сумме.

Способы оплаты:

Кредитная карта – 39,9%

Банковский перевод – 34,6%

unknown – 10,3%

Наличные – 9,9%

Криптовалюта – 5,3%
Преобладают безналичные платежи.

Выручка за последний месяц:

За последние 30 дней (с 2025-02-18 по 2025-03-20) – 161,5 млн.

За последний полный месяц (март 2025, по 20 марта) – 105,3 млн.
Разница объясняется тем, что март в данных неполный, а последние 30 дней захватывают часть февраля.

3. Объединение с клиентскими данными и анализ по уровням капитала
После объединения с clients_data.json (очищенного от пропусков в id) получено 8411 записей (inner join).

Распределение клиентов по уровням капитала:

Низкий капитал (<100k) – 152 клиента

Средний капитал (100k–1M) – 1397 клиентов

Высокий капитал (>1M) – 6448 клиентов

Выручка по уровням капитала:

Низкий капитал: 7,20 млн

Средний капитал: 67,98 млн

Высокий капитал: 319,28 млн

Наибольшую выручку приносят клиенты со средним капиталом, далее – с высоким, наименьшую – с низким.
Это говорит о том, что основная целевая аудитория – клиенты среднего достатка.

4. Визуализация
Построены гистограммы распределения сумм транзакций, столбчатые диаграммы выручки по услугам, круговая диаграмма способов оплаты, график зависимости средней суммы от возраста.

Визуализации наглядно подтверждают числовые выводы.

5. Прогнозирование спроса на следующий месяц
На основе ежедневных данных построена модель линейной регрессии для предсказания количества транзакций.

Средняя абсолютная ошибка на тестовой выборке (последние 7 дней) составила 13,8 транзакций.

Прогноз на апрель 2025 года показывает 105 транзакций в день в среднем, что свидетельствует о росте спроса.

Заключение:
Выполнен полный цикл анализа данных: от очистки до прогнозирования. Выявлены ключевые услуги, структура платежей, портрет клиента по капиталу. Полученные результаты могут быть использованы для планирования маркетинговых активностей и оптимизации продуктовой линейки.